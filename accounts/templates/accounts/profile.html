{# accounts/templates/accounts/profile.html #}
{% extends "accounts/base_accounts.html" %}
{% load jalali_tags %}

{% block title %}پروفایل کاربری{% endblock %}

{% block content %}
<div class="mx-auto px-4 flex justify-center">
    <div class="auth-login bg-white w-full max-w-md p-8 rounded-2xl shadow-lg border border-gray-100 text-center">
        <h3>سلام {{ profile.first_name|default:profile.email }}!</h3>
        
        <h3>اطلاعات شما:</h3>
        <ul class="list-unstyled text-right">
            <li><table><td class="profile-info-label">ایمیل: </td><td class="profile-info-value" dir="ltr">{{ profile.email|default:"-" }}</td></table></li>
            <li><table><td class="profile-info-label">شماره موبایل: </td><td class="profile-info-value" dir="ltr">{{ profile.phone_number|default:"-" }}</td></table></li>
            <li><table><td class="profile-info-label">نام: </td><td class="profile-info-value">{{ profile.first_name|default:"-" }}</td></table></li>
            <li><table><td class="profile-info-label">نام خانوادگی: </td><td class="profile-info-value">{{ profile.last_name|default:"-" }}</td></table></li>
            <li><table><td class="profile-info-label">کد ملی: </td><td class="profile-info-value">{{ profile.national_code|default:"-" }}</td></table></li>
            <li><table><td class="profile-info-label">آدرس: </td><td class="profile-info-value">{{ profile.address|default:"-" }}</td></table></li>
            <li><table><td class="profile-info-label">شهر: </td><td class="profile-info-value">{{ profile.city|default:"-" }}</td></table></li>
            <li><table><td class="profile-info-label">کد پستی: </td><td class="profile-info-value">{{ profile.postal_code|default:"-" }}</td></table></li>
            <li><table><td class="profile-info-label">تاریخ عضویت: </td><td class="profile-info-value">{{ profile.date_joined|to_jalali:"%Y/%m/%d" }}</td></table></li>
        </ul>

        <div class="flex justify-around mt-4">
            <a href="{% url 'accounts:profile_update' %}" class="btn">ویرایش پروفایل</a>
            <a href="{% url 'accounts:password_change' %}" class="btn">تغییر رمز عبور</a>
        </div>

        {# Example: Display order history (requires Order model and context in view) #}
        {% if orders %}
        <h3 class="mt-8">تاریخچه سفارشات اخیر:</h3>
        <ul class="list-unstyled text-right">
            {% for order in orders %}
                <li>سفارش شماره {{ order.order_number }} - وضعیت: {{ order.get_status_display }} - مبلغ کل: {{ order.total_amount }} تومان</li>
            {% empty %}
                <li>شما هنوز سفارشی ثبت نکرده اید.</li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
</div>
{% endblock content %}
